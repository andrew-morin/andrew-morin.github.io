"use strict";(self.webpackChunkandrews_chess_engine_web=self.webpackChunkandrews_chess_engine_web||[]).push([[984],{152:(n,e,t)=>{t.d(e,{A7:()=>nn,An:()=>L,BT:()=>W,CR:()=>y,DN:()=>q,DV:()=>I,G5:()=>b,IJ:()=>R,JS:()=>v,JX:()=>Z,Ms:()=>G,NL:()=>Y,NN:()=>x,Or:()=>on,PT:()=>X,UP:()=>k,Wl:()=>A,XP:()=>F,YQ:()=>z,ZY:()=>w,b0:()=>en,bX:()=>T,e5:()=>D,eY:()=>B,h4:()=>O,jp:()=>V,m_:()=>rn,o$:()=>U,oH:()=>un,qt:()=>K,r1:()=>N,t$:()=>$,tK:()=>J,ud:()=>Q,uf:()=>tn,ug:()=>P,wg:()=>M,xd:()=>j,y4:()=>H});var r=t(204);n=t.hmd(n);let o=new("undefined"==typeof TextDecoder?(0,n.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});o.decode();let u=null;function c(){return null!==u&&u.buffer===r.memory.buffer||(u=new Uint8Array(r.memory.buffer)),u}function i(n,e){return o.decode(c().subarray(n,n+e))}const s=new Array(32).fill(void 0);s.push(void 0,null,!0,!1);let l=s.length;function f(n){l===s.length&&s.push(s.length+1);const e=l;return l=s[e],s[e]=n,e}function a(n){return s[n]}let d=0,_=new("undefined"==typeof TextEncoder?(0,n.require)("util").TextEncoder:TextEncoder)("utf-8");const h="function"==typeof _.encodeInto?function(n,e){return _.encodeInto(n,e)}:function(n,e){const t=_.encode(n);return e.set(t),{read:n.length,written:t.length}};let p=null;function g(){return null!==p&&p.buffer===r.memory.buffer||(p=new Int32Array(r.memory.buffer)),p}function m(n){const e=a(n);return function(n){n<36||(s[n]=l,l=n)}(n),e}function b(){return m(r.get_initial_game_state())}function y(n){return m(r.convert_game_state_to_squares(f(n)))}function v(n,e){return m(r.get_square_at_index(f(n),e))}function w(n){return m(r.get_next_legal_game_states(f(n)))}function k(n,e){return m(r.perform_move(f(n),f(e)))}function q(n){var e=r.in_check(f(n));return E.__wrap(e)}function x(n){return m(r.perform_best_engine_move(f(n)))}function C(n,e){try{return n.apply(this,e)}catch(n){r.__wbindgen_exn_store(f(n))}}function S(n,e){return c().subarray(n/1,n/1+e)}class E{static __wrap(n){const e=Object.create(E.prototype);return e.ptr=n,e}__destroy_into_raw(){const n=this.ptr;return this.ptr=0,n}free(){const n=this.__destroy_into_raw();r.__wbg_incheckreturn_free(n)}get 0(){return 0!==r.__wbg_get_incheckreturn_0(this.ptr)}set 0(n){r.__wbg_set_incheckreturn_0(this.ptr,n)}get 1(){return r.__wbg_get_incheckreturn_1(this.ptr)>>>0}set 1(n){r.__wbg_set_incheckreturn_1(this.ptr,n)}}function $(n,e){return f(JSON.parse(i(n,e)))}function N(n,e){const t=a(e);var o=function(n,e,t){if(void 0===t){const t=_.encode(n),r=e(t.length);return c().subarray(r,r+t.length).set(t),d=t.length,r}let r=n.length,o=e(r);const u=c();let i=0;for(;i<r;i++){const e=n.charCodeAt(i);if(e>127)break;u[o+i]=e}if(i!==r){0!==i&&(n=n.slice(i)),o=t(o,r,r=i+3*n.length);const e=c().subarray(o+i,o+r);i+=h(n,e).written}return d=i,o}(JSON.stringify(void 0===t?null:t),r.__wbindgen_malloc,r.__wbindgen_realloc),u=d;g()[n/4+1]=u,g()[n/4+0]=o}function P(n){m(n)}function T(){return C((function(n,e,t){a(n).randomFillSync(S(e,t))}),arguments)}function L(){return C((function(n,e){a(n).getRandomValues(a(e))}),arguments)}function Y(n){return f(a(n).crypto)}function A(n){const e=a(n);return"object"==typeof e&&null!==e}function D(n){return f(a(n).process)}function I(n){return f(a(n).versions)}function J(n){return f(a(n).node)}function B(n){return"string"==typeof a(n)}function K(){return C((function(){return f(n.require)}),arguments)}function O(n,e){return f(i(n,e))}function R(n){return f(a(n).msCrypto)}function U(n){return"function"==typeof a(n)}function M(n,e){return f(new Function(i(n,e)))}function W(){return C((function(n,e){return f(a(n).call(a(e)))}),arguments)}function Z(){return C((function(){return f(self.self)}),arguments)}function j(){return C((function(){return f(window.window)}),arguments)}function Q(){return C((function(){return f(globalThis.globalThis)}),arguments)}function X(){return C((function(){return f(t.g.global)}),arguments)}function F(n){return void 0===a(n)}function G(){return C((function(n,e,t){return f(a(n).call(a(e),a(t)))}),arguments)}function V(n){return f(a(n).buffer)}function H(n){return f(new Uint8Array(a(n)))}function z(n,e,t){a(n).set(a(e),t>>>0)}function nn(n){return a(n).length}function en(n){return f(new Uint8Array(n>>>0))}function tn(n,e,t){return f(a(n).subarray(e>>>0,t>>>0))}function rn(n){return f(a(n))}function on(n,e){throw new Error(i(n,e))}function un(){return f(r.memory)}},522:(n,e,t)=>{t.r(e);var r=t(152);const o=t.p+"be5d44ca5ee868885d21.svg",u=t.p+"629fc0578d37e611ff7c.svg",c=t.p+"d714eeb4f02e04545177.svg",i=t.p+"fd4e01f573d1bc3eaab3.svg",s=t.p+"cf388bf415c0d33ec16f.svg",l=t.p+"6c8cc8fabe5215cc854d.svg",f={White:{Pawn:t.p+"50273cc6d86861932d0a.svg",Bishop:t.p+"8333f40f6a469e7e5802.svg",Knight:t.p+"145b8796b11b8d78677d.svg",Rook:t.p+"ba9ac487118f903a9b31.svg",Queen:t.p+"7a1aecff0f22ff68c43f.svg",King:t.p+"3f959aab36df6290a8e0.svg"},Black:{Pawn:o,Bishop:u,Knight:c,Rook:i,Queen:s,King:l}};let a=r.G5(),d=r.ZY(a);r.CR(a).forEach((([n,e],t)=>{const o=Math.floor(t/8),u=document.querySelector(`#rankIndex${o}`),c="Empty"===n?document.createElement("td"):v(n,e);c.dataset.index=t,c.addEventListener("click",function(n){return e=>{p&&q();const[t]=r.JS(a,n),o=h,u=_;let c;if(a.turn==g&&null!=_&&h.includes(n)){const e=d.filter((e=>{const{move_list:t}=e,r=t[t.length-1];return r.from===_&&r.to===n}));if(e.length>1)!function(n){const e=document.querySelector("#promotionPieces");n.forEach((n=>{const{move_list:t}=n,r=t[t.length-1],o=v(a.turn,r.promotion_piece);o.addEventListener("click",function(n){return e=>{const t=h,r=_;w(n),q(),x(r,t,!0),k(),e.stopPropagation()}}(r)),e.appendChild(o)})),p=!0}(e);else{const{move_list:n}=e[0];c=n[n.length-1]}}else"EMPTY"===t||_===n?(_=null,h=null):function(n){_=n,h=[],d.forEach((e=>{const t=e.move_list[e.move_list.length-1];t.from===n&&h.push(t.to)}))}(n);w(c),x(u,o,!0),e.stopPropagation()}}(t)),u.appendChild(c)}));let _=null,h=null,p=!1,g="White",m=!1;function b(n){const e=document.querySelector(`[data-index="${n.to}"]`);e.firstChild&&e.removeChild(e.firstChild);const t=document.querySelector(`[data-index="${n.from}"]`);if(n.promotion_piece){t.removeChild(t?.firstChild);const r=y(a.turn,n.promotion_piece);e.appendChild(r)}else e.appendChild(t.firstChild);if(n.castle){let e,t;2===n.to?(e=0,t=3):6===n.to?(e=7,t=5):58===n.to?(e=56,t=59):62===n.to&&(e=63,t=61);const r=document.querySelector(`[data-index="${e}"]`);document.querySelector(`[data-index="${t}"]`).appendChild(r.firstChild)}}function y(n,e){const t=document.createElement("img");return t.src=f[n][e],t}function v(n,e){const t=document.createElement("td");return t.appendChild(y(n,e)),t}function w(n){n&&a.turn===g&&(b(n),a=r.UP(a,n),d=r.ZY(a),_=null,h=null,k(),m||a.turn===g||(a=r.NN(a),d=r.ZY(a),b(a.move_list.at(-1))))}function k(){a.halfmove_counter>=100?(m=!0,alert("No capture or pawn move in 50 moves. It's a draw! :/")):0===d.length&&(m=!0,r.DN(a)[0]?"White"===a.turn?alert("You lose :("):alert("You win! :D"):alert("It's a draw! :/"))}function q(){document.querySelector("#promotionPieces").replaceChildren(),p=!1}function x(n,e,t=!1){if(null!=e&&e.forEach((n=>{document.querySelector(`[data-index="${n}"]`).classList.remove("target_square")})),g==a.turn&&null!=h&&h.forEach((n=>{document.querySelector(`[data-index="${n}"]`).classList.add("target_square")})),null!=n&&document.querySelector(`[data-index="${n}"]`).classList.remove("source_square"),null!=_&&document.querySelector(`[data-index="${_}"]`).classList.add("source_square"),t){const n=document.querySelector(".king_check"),e=r.DN(a),t=e[0],o=e[1];n?n.classList.remove("king_check"):t&&document.querySelector(`[data-index="${o}"]`).classList.add("king_check")}}document.addEventListener("click",(()=>{const n=_,e=h;_=null,h=null,x(n,e)}))},204:(n,e,t)=>{var r=t.w[n.id];n.exports=r,t(152),r[""]()}}]);